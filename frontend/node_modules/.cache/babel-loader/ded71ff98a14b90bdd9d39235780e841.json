{"ast":null,"code":"var _jsxFileName = \"/Users/benjamin/School/NewsApp/frontend/src/components/News.js\";\nimport React from 'react';\nimport { getArticles, getPreArticles } from '../api/api';\nimport ArticleList from './ArticleList';\nimport SearchBar from './SearchBar';\nimport { Container, Header } from 'semantic-ui-react';\nimport * as auth from './auth';\nimport axios from 'axios';\n\nclass News extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      articles: [],\n      preArticles: [],\n      searchTopic: '',\n      totalResults: '',\n      loading: false,\n      apiError: ''\n    };\n\n    this.searchForTopic = async topic => {\n      const token = auth.getToken();\n      axios.post('http://localhost:3001/api/newsSearch', {\n        topic,\n        token\n      }).then(res => console.log(res));\n\n      try {\n        this.setState({\n          loading: true\n        });\n        const response = await getArticles(topic);\n        this.setState({\n          articles: response.articles,\n          searchTopic: topic,\n          totalResults: response.totalResults\n        });\n      } catch (error) {\n        this.setState({\n          apiError: 'Could not find any articles'\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n    };\n  }\n\n  async componentDidMount() {\n    try {\n      const response = await getPreArticles();\n      this.setState({\n        articles: response.articles\n      });\n    } catch (error) {\n      this.setState({\n        apiError: 'Could not find any articles'\n      });\n    }\n  }\n\n  render() {\n    const {\n      preArticles,\n      articles,\n      apiError,\n      loading,\n      searchTopic,\n      totalResults\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }\n    }, auth.isLoggedIn() ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h2\",\n      style: {\n        textAlign: 'center',\n        margin: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }, \"Search for a news topic\"), /*#__PURE__*/React.createElement(SearchBar, {\n      searchForTopic: this.searchForTopic,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    })) : null, loading && /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        textAlign: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }, \"Searching for articles...\"), articles.length > 0 && searchTopic.length !== 0 ? /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      style: {\n        textAlign: 'center',\n        margin: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, \"Found \", totalResults, \" articles on \\\"\", searchTopic, \"\\\"\") : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, !auth.isLoggedIn() ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h2\",\n      style: {\n        textAlign: 'center',\n        margin: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, \"Trending articles right now\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"createAccount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#/signin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 19\n      }\n    }, \"Sign in to use search\")))) : null, auth.isLoggedIn() ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      style: {\n        textAlign: 'center',\n        margin: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, \"Trending articles right now\")) : null), articles.length > 0 && /*#__PURE__*/React.createElement(ArticleList, {\n      articles: articles,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 33\n      }\n    }), apiError && /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 22\n      }\n    }, \"Could not fetch any articles. Please try again.\"), preArticles.length > 0 && /*#__PURE__*/React.createElement(ArticleList, {\n      articles: preArticles,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 36\n      }\n    }));\n  }\n\n}\n\nexport default News;","map":{"version":3,"sources":["/Users/benjamin/School/NewsApp/frontend/src/components/News.js"],"names":["React","getArticles","getPreArticles","ArticleList","SearchBar","Container","Header","auth","axios","News","Component","state","articles","preArticles","searchTopic","totalResults","loading","apiError","searchForTopic","topic","token","getToken","post","then","res","console","log","setState","response","error","componentDidMount","render","isLoggedIn","textAlign","margin","length"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { getArticles, getPreArticles } from '../api/api'\nimport ArticleList from './ArticleList'\nimport SearchBar from './SearchBar'\nimport { Container, Header } from 'semantic-ui-react'\nimport * as auth from './auth'\nimport axios from 'axios'\n\nclass News extends React.Component {\n  state = {\n    articles: [],\n    preArticles: [],\n    searchTopic: '',\n    totalResults: '',\n    loading: false,\n    apiError: '',\n  }\n\n  searchForTopic = async (topic) => {\n    const token = auth.getToken();\n    axios\n      .post('http://localhost:3001/api/newsSearch', { topic, token })\n      .then((res) => console.log(res))\n    \n\n    try {\n      this.setState({ loading: true })\n      const response = await getArticles(topic)\n      this.setState({\n        articles: response.articles,\n        searchTopic: topic,\n        totalResults: response.totalResults,\n      })\n    } catch (error) {\n      this.setState({ apiError: 'Could not find any articles' })\n    }\n    this.setState({ loading: false })\n  }\n\n  async componentDidMount() {\n    try {\n      const response = await getPreArticles()\n      this.setState({ articles: response.articles })\n    } catch (error) {\n      this.setState({ apiError: 'Could not find any articles' })\n    }\n  }\n\n  render() {\n    const {\n      preArticles,\n      articles,\n      apiError,\n      loading,\n      searchTopic,\n      totalResults,\n    } = this.state\n    return (\n      <Container>\n        {auth.isLoggedIn() ? (\n          <div>\n            <Header as=\"h2\" style={{ textAlign: 'center', margin: 20 }}>\n              Search for a news topic\n            </Header>\n            <SearchBar searchForTopic={this.searchForTopic} />\n          </div>\n        ) : null}\n\n        {loading && (\n          <p style={{ textAlign: 'center' }}>Searching for articles...</p>\n        )}\n        {articles.length > 0 && searchTopic.length !== 0 ? (\n          <Header as=\"h4\" style={{ textAlign: 'center', margin: 20 }}>\n            Found {totalResults} articles on \"{searchTopic}\"\n          </Header>\n        ) : (\n          <div>\n            {!auth.isLoggedIn() ? (\n              <div>\n                <Header as=\"h2\" style={{ textAlign: 'center', margin: 20 }}>\n                  Trending articles right now\n                </Header>\n                <div className=\"createAccount\">\n                <a href=\"#/signin\">\n                  <small>Sign in to use search</small>\n                </a>\n                </div>\n              </div>\n            ) : null}\n            {auth.isLoggedIn() ? (\n              <div>\n                <Header as=\"h4\" style={{ textAlign: 'center', margin: 20 }}>\n                  Trending articles right now\n                </Header>\n              </div>\n            ) : null}\n          </div>\n        )}\n        {articles.length > 0 && <ArticleList articles={articles} />}\n        {apiError && <p>Could not fetch any articles. Please try again.</p>}\n        {preArticles.length > 0 && <ArticleList articles={preArticles} />}\n      </Container>\n    )\n  }\n}\n\nexport default News\n"]},"metadata":{},"sourceType":"module"}