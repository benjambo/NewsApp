{"ast":null,"code":"import jwt from \"jsonwebtoken\"; // functions for authentication\n\n/*export function isLoggedIn() {\n  const token = localStorage.getItem(\"token\");\n  return token != null;\n}\n\nexport function logout() {\n  if (isLoggedIn()) {\n    //localStorage.clear();\n    localStorage.removeItem(\"token\");\n  }\n}\n\n// to save the token to the browsers localstorage which\n// will keep the session active\nexport function setToken(token) {\n  if (getToken() === token) {\n    localStorage.clear();\n    localStorage.setItem(\"token\", token);\n  }\n  localStorage.setItem(\"token\", token);\n}\n\nexport function getToken() {\n  return localStorage.getItem(\"token\");\n}\n\nexport function decodeToken() {\n  const token = getToken();\n  if (!token) {\n    return null;\n  }\n  const decodedToken = jwt.decode(token);\n  console.log(\"decoded token:\");\n  console.log(decodedToken);\n  return decodedToken;\n}\n\n// User info decoded from Token\nexport function getUserId() {\n  // decrypt token to its original data\n  const token = decodeToken();\n  if (!token) {\n    return null;\n  }\n  return token.id;\n}\n\nexport function getUserEmail() {\n  // decrypt token to its original data\n  const token = decodeToken();\n  if (!token) {\n    return null;\n  }\n  return token.email;\n}*/\n\nexport function getUserFirstName() {\n  // decrypt token to its original data\n  const token = decodeToken();\n\n  if (!token) {\n    return \"User\";\n  }\n\n  return token.firstName;\n}\nexport function getUserLastName() {\n  // decrypt token to its original data\n  const token = decodeToken();\n\n  if (!token) {\n    return null;\n  }\n\n  return token.lastName;\n}\nexport default {\n  signin: user => {\n    console.log(user);\n    return fetch('/user/signin', {\n      method: 'post',\n      body: JSON.stringify(user),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (res.status !== 401) return res.json().then(data => data);else return {\n        isAuthenticated: false,\n        user: {\n          email: ''\n        }\n      };\n    });\n  },\n  signup: user => {\n    console.log(user);\n    return fetch('/user/signup', {\n      method: 'post',\n      body: JSON.stringify(user),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json()).then(data => data);\n  },\n  signout: () => {\n    return fetch('/user/signout').then(res => res.json()).then(data => data);\n  },\n  isAuthenticated: () => {\n    return fetch('/user/authenticated').then(res => {\n      if (res.status !== 401) return res.json().then(data => data);else return {\n        isAuthenticated: false,\n        user: {\n          username: '',\n          role: ''\n        }\n      };\n    });\n  }\n};","map":{"version":3,"sources":["/Users/benjamin/School/NewsApp/frontend/src/components/auth.js"],"names":["jwt","getUserFirstName","token","decodeToken","firstName","getUserLastName","lastName","signin","user","console","log","fetch","method","body","JSON","stringify","headers","then","res","status","json","data","isAuthenticated","email","signup","signout","username","role"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,cAAhB,C,CAEA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA,OAAO,SAASC,gBAAT,GAA4B;AACjC;AAEA,QAAMC,KAAK,GAAGC,WAAW,EAAzB;;AACA,MAAI,CAACD,KAAL,EAAY;AACV,WAAO,MAAP;AACD;;AACD,SAAOA,KAAK,CAACE,SAAb;AACD;AACD,OAAO,SAASC,eAAT,GAA2B;AAChC;AACA,QAAMH,KAAK,GAAGC,WAAW,EAAzB;;AACA,MAAI,CAACD,KAAL,EAAY;AACV,WAAO,IAAP;AACD;;AACD,SAAOA,KAAK,CAACI,QAAb;AACD;AAED,eAAe;AACbC,EAAAA,MAAM,EAAGC,IAAD,IAAU;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,WAAOG,KAAK,CAAC,cAAD,EAAiB;AAC3BC,MAAAA,MAAM,EAAE,MADmB;AAE3BC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAf,CAFqB;AAG3BQ,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAHkB,KAAjB,CAAL,CAMJC,IANI,CAMEC,GAAD,IAAS;AACf,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB,OAAOD,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAiBI,IAAD,IAAUA,IAA1B,CAAP,CAAxB,KACK,OAAO;AAAEC,QAAAA,eAAe,EAAE,KAAnB;AAA0Bd,QAAAA,IAAI,EAAE;AAAEe,UAAAA,KAAK,EAAE;AAAT;AAAhC,OAAP;AACN,KATM,CAAP;AAUD,GAbY;AAcbC,EAAAA,MAAM,EAAGhB,IAAD,IAAU;AAChBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,WAAOG,KAAK,CAAC,cAAD,EAAiB;AAC3BC,MAAAA,MAAM,EAAE,MADmB;AAE3BC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,IAAf,CAFqB;AAG3BQ,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAHkB,KAAjB,CAAL,CAOJC,IAPI,CAOEC,GAAD,IAASA,GAAG,CAACE,IAAJ,EAPV,EAQJH,IARI,CAQEI,IAAD,IAAUA,IARX,CAAP;AASD,GAzBY;AA0BbI,EAAAA,OAAO,EAAE,MAAM;AACb,WAAOd,KAAK,CAAC,eAAD,CAAL,CACJM,IADI,CACEC,GAAD,IAASA,GAAG,CAACE,IAAJ,EADV,EAEJH,IAFI,CAEEI,IAAD,IAAUA,IAFX,CAAP;AAGD,GA9BY;AA+BbC,EAAAA,eAAe,EAAE,MAAM;AACrB,WAAOX,KAAK,CAAC,qBAAD,CAAL,CAA6BM,IAA7B,CAAmCC,GAAD,IAAS;AAChD,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB,OAAOD,GAAG,CAACE,IAAJ,GAAWH,IAAX,CAAiBI,IAAD,IAAUA,IAA1B,CAAP,CAAxB,KACK,OAAO;AAAEC,QAAAA,eAAe,EAAE,KAAnB;AAA0Bd,QAAAA,IAAI,EAAE;AAAEkB,UAAAA,QAAQ,EAAE,EAAZ;AAAgBC,UAAAA,IAAI,EAAE;AAAtB;AAAhC,OAAP;AACN,KAHM,CAAP;AAID;AApCY,CAAf","sourcesContent":["import jwt from \"jsonwebtoken\";\n\n// functions for authentication\n/*export function isLoggedIn() {\n  const token = localStorage.getItem(\"token\");\n  return token != null;\n}\n\nexport function logout() {\n  if (isLoggedIn()) {\n    //localStorage.clear();\n    localStorage.removeItem(\"token\");\n  }\n}\n\n// to save the token to the browsers localstorage which\n// will keep the session active\nexport function setToken(token) {\n  if (getToken() === token) {\n    localStorage.clear();\n    localStorage.setItem(\"token\", token);\n  }\n  localStorage.setItem(\"token\", token);\n}\n\nexport function getToken() {\n  return localStorage.getItem(\"token\");\n}\n\nexport function decodeToken() {\n  const token = getToken();\n  if (!token) {\n    return null;\n  }\n  const decodedToken = jwt.decode(token);\n  console.log(\"decoded token:\");\n  console.log(decodedToken);\n  return decodedToken;\n}\n\n// User info decoded from Token\nexport function getUserId() {\n  // decrypt token to its original data\n  const token = decodeToken();\n  if (!token) {\n    return null;\n  }\n  return token.id;\n}\n\nexport function getUserEmail() {\n  // decrypt token to its original data\n  const token = decodeToken();\n  if (!token) {\n    return null;\n  }\n  return token.email;\n}*/\nexport function getUserFirstName() {\n  // decrypt token to its original data\n\n  const token = decodeToken();\n  if (!token) {\n    return \"User\";\n  }\n  return token.firstName;\n}\nexport function getUserLastName() {\n  // decrypt token to its original data\n  const token = decodeToken();\n  if (!token) {\n    return null;\n  }\n  return token.lastName;\n}\n\nexport default {\n  signin: (user) => {\n    console.log(user)\n    return fetch('/user/signin', {\n      method: 'post',\n      body: JSON.stringify(user),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }).then((res) => {\n      if (res.status !== 401) return res.json().then((data) => data)\n      else return { isAuthenticated: false, user: { email: '' } }\n    })\n  },\n  signup: (user) => {\n    console.log(user)\n    return fetch('/user/signup', {\n      method: 'post',\n      body: JSON.stringify(user),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n      .then((res) => res.json())\n      .then((data) => data)\n  },\n  signout: () => {\n    return fetch('/user/signout')\n      .then((res) => res.json())\n      .then((data) => data)\n  },\n  isAuthenticated: () => {\n    return fetch('/user/authenticated').then((res) => {\n      if (res.status !== 401) return res.json().then((data) => data)\n      else return { isAuthenticated: false, user: { username: '', role: '' } }\n    })\n  },\n}\n"]},"metadata":{},"sourceType":"module"}